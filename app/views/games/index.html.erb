<div class="start-container">
  <img src="<%= asset_path('daangnee.png') %>" alt="ë‹¹ê·¼ ê²Œì„ ë¡œê³ " class="game-logo">
  <h1>ğŸ¥• ë‹¹ê·¼ ê²Œì„ ğŸ¥•</h1>
  
  <div class="audio-controls">
    <div class="volume-label">ğŸ”Š ìŒì•… ë³¼ë¥¨</div>
    <input type="range" id="volumeSlider" min="0" max="100" step="1" value="50" class="volume-slider" style="padding: 0;">
    <div class="volume-value">50%</div>
  </div>
  

  <form id="start-form" class="start-form">

  <ol>
    <li>ë‘ ì ì„ í´ë¦­í•˜ì—¬ ì‚¬ê°í˜• ì˜ì—­ì„ ì„ íƒí•©ë‹ˆë‹¤</li>
    <li>ì„ íƒí•œ ì˜ì—­ì˜ ìˆ«ì í•©ì´ 10ì´ ë˜ë©´ ì œê±°ë©ë‹ˆë‹¤</li>
    <li>ì œí•œ ì‹œê°„ 2ë¶„ ë™ì•ˆ ìµœëŒ€í•œ ë§ì€ ì ìˆ˜ë¥¼ íšë“í•˜ì„¸ìš”</li>
    <li>ë‹¹ê·¼ì„ ì§€ìš°ë©´ 4ì ì„ ë” ì–»ìŠµë‹ˆë‹¤</li>
  </ol>
  
    <div class="form-group">
      <label for="nickname">ë‹‰ë„¤ì„</label>
      <input type="text" id="nickname" required>
    </div>

    <div class="form-group">
      <label for="region">ì§€ì—­</label>
      <select id="region" required>
        <option value="">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="ì¤‘ê³ ê±°ë˜ì‹¤">ì¤‘ê³ ê±°ë˜ì‹¤</option>
        <option value="Local Jobs">Local Jobs</option>
        <option value="ë²„í‹°ì»¬ ì‚¬ì—…ì‹¤">ë²„í‹°ì»¬ ì‚¬ì—…ì‹¤</option>
        <option value="Karrot Ads">Karrot Ads</option>
        <option value="Local Business">Local Business</option>
        <option value="ì»¤ë®¤ë‹ˆí‹°ì‹¤">ì»¤ë®¤ë‹ˆí‹°ì‹¤</option>
        <option value="Search & Discovery ë¶€ë¬¸">Search & Discovery ë¶€ë¬¸</option>
        <option value="Service Core ë¶€ë¬¸">Service Core ë¶€ë¬¸</option>
        <option value="Chatting">Chatting</option>
        <option value="Global Business ë¶€ë¬¸">Global Business ë¶€ë¬¸</option>
        <option value="ë‹¹ê·¼í˜ì´">ë‹¹ê·¼í˜ì´</option>
      </select>
    </div>

    <button type="submit" class="start-button">ê²Œì„ ì‹œì‘</button>
  </form>
</div>

<% content_for :styles do %>
  <style>
    .start-container {
      max-width: 400px;
      margin: 50px auto;
      padding: 20px;
      text-align: center;
    }

    .game-logo {
      width: 200px;
      height: 200px;
      margin: 0 auto 20px;
      display: block;
      border-radius: 30px;
    }

    h1 {
      font-size: 32px;
      margin-bottom: 30px;
      color: #333;
    }
    
    .audio-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .volume-label {
      font-size: 16px;
      margin-right: 10px;
      color: #555;
    }
    
    .volume-slider {
      width: 120px;
      margin: 0 10px;
    }
    
    .volume-value {
      font-size: 14px;
      color: #666;
      min-width: 40px;
    }

    .start-form {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }

    select {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 16px;
      padding-right: 40px;
    }

    /* ë³¼ë¥¨ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ë§ */
    .volume-slider {
      height: 6px;
      background: #ddd;
      border-radius: 3px;
      cursor: pointer;
      margin-top: 5px;
    }

    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: #ff6f0f;
      border-radius: 50%;
      cursor: pointer;
      transition: all .2s ease;
      margin-top: -5px;
    }

    .volume-slider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      background: #ff6f0f;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: all .2s ease;
      margin-top: -5px;
    }

    .volume-slider::-webkit-slider-runnable-track {
      height: 6px;
      background: linear-gradient(to right, #ff6f0f 0%, #ff6f0f var(--value, 50%), #ddd var(--value, 50%), #ddd 100%);
      border-radius: 3px;
      border: none;
    }

    .volume-slider::-moz-range-track {
      height: 6px;
      background: #ddd;
      border-radius: 3px;
      border: none;
    }

    .volume-slider::-moz-range-progress {
      height: 6px;
      background: #ff6f0f;
      border-radius: 3px;
    }

    select::-ms-expand {
      display: none;
    }

    .start-button {
      background: #ff6f0f;
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 18px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .start-button:hover {
      background: #ff5500;
    }

    /* ê²Œì„ ê·œì¹™ ìŠ¤íƒ€ì¼ */
    h1 {
      color: #ff6f0f;
      font-size: 24px;
      margin: 0 0 20px 0;
      padding-bottom: 15px;
      border-bottom: 2px solid #ff6f0f;
    }

    .start-form ol {
      list-style: none;
      padding: 0;
      counter-reset: rule-counter;
    }

    .start-form ol li {
      position: relative;
      margin-bottom: 15px;
      padding: 10px 15px 10px 45px;
      background-color: #fff8f3;
      border-radius: 8px;
      font-size: 16px;
      line-height: 1.5;
      counter-increment: rule-counter;
      transition: transform 0.2s ease;
    }

    .start-form ol li:hover {
      transform: translateX(5px);
    }

    .start-form ol li::before {
      content: counter(rule-counter);
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      width: 24px;
      height: 24px;
      background-color: #ff6f0f;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }
  </style>
<% end %>

<% content_for :scripts do %>
  <script>
    // ë³¼ë¥¨ ì„¤ì •
    const setupVolumeControl = () => {
      const volumeSlider = document.getElementById('volumeSlider')
      const volumeValue = document.querySelector('.volume-value')
      
      // ìŠ¬ë¼ì´ë” ì±„ìš°ê¸° íš¨ê³¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
      const updateSliderFill = (value) => {
        volumeSlider.style.setProperty('--value', `${value}%`)
      }
      
      // ì €ì¥ëœ ë³¼ë¥¨ ê°’ ë³µì›
      const savedVolume = localStorage.getItem('gameVolume')
      if (savedVolume) {
        const volumePercent = Math.round(savedVolume * 100)
        volumeSlider.value = volumePercent
        volumeValue.textContent = `${volumePercent}%`
        updateSliderFill(volumePercent)
      } else {
        updateSliderFill(50) // ê¸°ë³¸ê°’
      }
      
      // ë³¼ë¥¨ ì¡°ì ˆ
      volumeSlider.addEventListener('input', () => {
        const volumePercent = volumeSlider.value
        const volume = volumePercent / 100
        volumeValue.textContent = `${volumePercent}%`
        localStorage.setItem('gameVolume', volume.toString())
        updateSliderFill(volumePercent)
      })
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë³¼ë¥¨ ì»¨íŠ¸ë¡¤ ì„¤ì •
    document.addEventListener('DOMContentLoaded', setupVolumeControl)

    // ê²Œì„ ì‹œì‘ í¼ ì œì¶œ
    document.getElementById('start-form').addEventListener('submit', (e) => {
      e.preventDefault()
      
      const nickname = document.getElementById('nickname').value
      const region = document.getElementById('region').value
      const volumePercent = document.getElementById('volumeSlider').value
      const volume = volumePercent / 100
      
      localStorage.setItem('nickname', nickname)
      localStorage.setItem('region', region)
      localStorage.setItem('gameVolume', volume.toString())
      localStorage.setItem('gameMuted', 'false') // ê²Œì„ ì‹œì‘ ì‹œ ìŒì†Œê±° í•´ì œ 
    
      window.location.href = '/games/play'
    })
  </script>
<% end %>
